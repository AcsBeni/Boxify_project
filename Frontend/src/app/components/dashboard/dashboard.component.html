<div class="dashboard">

  <!-- ===== KPI ROW ===== -->
  <section class="kpi-grid">
    <p-card class="kpi-card">
      <span class="kpi-value">{{ boxes.length }}</span>
      <span class="kpi-label">Összes doboz</span>
    </p-card>

    <p-card class="kpi-card">
      <span class="kpi-value">7</span>
      <span class="kpi-label">Üres dobozok</span>
    </p-card>

    <p-card class="kpi-card">
      <span class="kpi-value">87%</span>
      <span class="kpi-label">Legtelítettebb</span>
    </p-card>

    <p-card class="kpi-card">
      <span class="kpi-value">4</span>
      <span class="kpi-label">Kategóriák</span>
    </p-card>
  </section>

  <!-- ===== MAIN GRID ===== -->
  <section class="main-grid">

    <div class="left-column">

  <!-- Chart 1 -->
  <p-card class="card ">
    <h4 class="card-title">Dobozok tárolóhelye</h4>
    <p-chart type="bar" [data]="basicData" [options]="basicOptions"></p-chart>
  </p-card>

  <!-- Chart 2 -->
  <p-card class="card " >
    <h4 class="card-title">Tárolóhely felhasználva</h4>
    <p-chart type="doughnut" [data]="data" [options]="options"></p-chart>
    <span class="muted-text">48% foglalt</span>
  </p-card>

  <!-- Table (FULL WIDTH) -->
  <p-card class="card table-card">
    <div class="table-header">
      <h3>Dobozok</h3>
      <div class="table-actions">
         <button pButton icon="pi pi-trash" label="Dobozok törlése" (click)="deleteBoxes()"></button>
        <button pButton icon="pi pi-inbox" label="Empty" (click)="emptyBoxes()"></button>
        <button pButton icon="pi pi-plus" label="New Box" routerLink="/boxes/new"></button>
      </div>
    </div>

    <p-table [value]="boxes" responsiveLayout="scroll">
       <ng-template pTemplate="header">
            <tr>
              <th>Kód</th>
              <th>Tartalom</th>
              <th>Kapacitás</th>
              <th>Státusz</th>
              
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-box>
            <tr>
              <td>{{ box.code }}</td>
              <td>{{ box.items }} items</td>
              
              <td>
                
                <span> <p-progressBar [value]="box.capacity"></p-progressBar></span>
                <span class="capacity"
                  [ngClass]="{
                    low: box.capacity < 40,
                    medium: box.capacity >= 40 && box.capacity < 70,
                    high: box.capacity >= 70
                  }">
                  {{ box.capacity }}
                  
                  
                </span>
              </td>
              <td>{{box.status}}</td>
              
            </tr>
          </ng-template>
        </p-table>
    
  </p-card>

</div>

    <!-- RIGHT COLUMN -->
    <div class="right-column">

      <p-card class="card selected-box">
        <h4 class="card-title">BOX-123456</h4>

        <div class="box-preview">
          <span class="box-id">Shelf A</span>
          <span class="box-meta">6 items · 75kg</span>

          <p-progressBar [value]="75"></p-progressBar>
          <span class="capacity high">75% Full</span>
        </div>

        <div class="box-stats">
          <div>
            <small>Last Modified</small>
            <strong>3%</strong>
          </div>
          <div>
            <small>Space Remaining</small>
            <strong>97%</strong>
          </div>
        </div>

        <div class="box-actions">
          <button pButton icon="pi pi-trash" label="Delete"></button>
          <button pButton icon="pi pi-cog" label="Details"></button>
        </div>
      </p-card>

    </div>

  </section>

</div>